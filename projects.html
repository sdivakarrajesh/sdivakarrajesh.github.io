<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

    <link href="stylesheets/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="stylesheets/projects.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Divakar Rajesh | Portfolio</title>
</head>

<body>
    <div class="sticky-header">
        <div id="menu">
            <nav>
                <div class="home-nav"><a href="#">HOME</a></div>

                <div class="projects-nav"><a href="#">PROJECTS</a>
                    <div class="projects-options">
                        <a href="#">WEB</a>
                        <a href="#">MOBILE</a>
                        <a href="#">DESKTOP</a>
                    </div>
                </div>

                <div class="other-nav"><a href="#">OTHER</a></div>

            </nav>
        </div>
    </div>
    <div class="side-nav">
        <nav>
            <ul>
                <li><a href="#mobile-section" class="dot name-active"><span>Mobile</span></a></li>
                <li><a href="#web-section" class="dot"><span>Web</span></a></li>
                <li><a href="#desktop-section" class="dot"><span>Desktop</span></a></li>
            </ul>
        </nav>
    </div>


    <div class="content">
        <section id="mobile-section">
            <div class="mobile-content">
                <img src="assets/vectors/img3.jpg" alt="test" class="left-img">
                <div class="left-float">
                    <h2>Mobile Development</h2>
                    <button class="flat-btn">Explore</button>
                </div>
            </div>
        </section>
        <section id="web-section">
            <div class="web-content">
                <img src="assets/vectors/img1.png" alt="" class="right-img">
                <div class="right-float">
                    <h2>Web Development</h2>
                    <button class="flat-btn">Explore</button>
                </div>
            </div>
        </section>
        <section id="desktop-section">
            <div class="desktop-content">
                <img src="assets/vectors/img2.png" alt="test" class="left-img">
                <div class="left-float">
                    <h2>Desktop Development</h2>
                    <button class="flat-btn">Explore</button>
                </div>
            </div>
        </section>

    </div>
    <script src="scripts/jquery-3.1.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $.scrollTo = $.fn.scrollTo = function (x, y, options) {
                if (!(this instanceof $)) return $.fn.scrollTo.apply($('html, body'), arguments);
                options = $.extend({}, {
                    gap: {
                        x: 0,
                        y: 0
                    },
                    animation: {
                        easing: 'swing',
                        duration: 600,
                        complete: $.noop,
                        step: $.noop
                    }
                }, options);
                return this.each(function () {
                    var elem = $(this);
                    elem.stop().animate({
                        scrollLeft: !isNaN(Number(x)) ? x : $(y).offset().left + options.gap.x,
                        scrollTop: !isNaN(Number(y)) ? y : $(y).offset().top + options.gap.y
                    }, options.animation);
                });
            };
            var aChildren = $("nav li").children();
            var aArray = [];
            for (var i = 0; i < aChildren.length; i++) {
                var aChild = aChildren[i];
                var ahref = $(aChild).attr('href');
                aArray.push(ahref);
            }
            
            $(window).scroll(function () {
                var windowPos = $(window).scrollTop();
                var windowHeight = $(window).height();
                var docHeight = $(document).height();

                for (var i = 0; i < aArray.length; i++) {
                    var theID = aArray[i];
                    var divPos = $(theID).offset().top;
                    var divHeight = $(theID).height();

                    if (windowPos >= divPos && windowPos < (divPos + divHeight)) {
                        $("a[href='" + theID + "']").addClass("name-active");
                        if(theID==="#web-section"){
                            $(".dot").css("background-color", "rgba(231, 229, 229, 0.4)");
                            $(".dot:hover").css("background-color", "rgba(231, 229, 229, 0.8)");
                            $(".name-active").css("background-color", "rgb(155, 155, 155)");
                        }
                        else{
                            $(".dot").css("background-color", "rgba(253, 245, 245, 0.747)");
                            $(".dot:hover").css("background-color", "rgba(226, 222, 222, 0.8)");
                            $(".name-active").css("background-color", "rgb(155, 155, 155)");
                        }

                    } else {
                        $("a[href='" + theID + "']").removeClass("name-active");
                    }
                }
                if (windowPos + windowHeight == docHeight) {
                    if (!$("nav li:last-child a").hasClass("name-active")) {
                        var navActiveCurrent = $(".name-active").attr("href");
                        $("a[href='" + navActiveCurrent + "']").removeClass("name-active");
                        $("nav li:last-child a").addClass("name-active");

                        ;
                    }
                }
            });
            $(".side-nav nav a").click(function (evn) {
                evn.preventDefault();
                $('html,body').scrollTo(this.hash, this.hash);
                var section = evn.currentTarget.hash;
                console.log(section);

            });
        });
    </script>


</body>

</html>